ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x1 (POWERON),boot:0x8 (SPI_FAST_FLASH_BOOT)
SPIWP:0xee
mode:DIO, clock div:1
load:0x3fce2820,len:0x1188
load:0x403c8700,len:0x4
load:0x403c8704,len:0xbf0
load:0x403cb700,len:0x30e4
entry 0x403c88ac
ğŸ” Verificando estado del sistema...
ğŸ›¡ï¸  Inicializando Watchdog Timer...
âœ… Watchdog configurado: timeout=120s
ğŸš€ SISTEMA DE MONITOREO AMBIENTAL ELATHIA
==========================================
Iniciando sistema...
ğŸ”– Firmware activo: v4.1.1-JAMR4-TIMEOUT
â±ï¸  CronÃ³metro iniciado - midiendo tiempo de funcionamiento
ğŸ›°ï¸  CONFIGURACIÃ“N DE GPS:
   GPS SIM (mÃ³dem): âœ… HABILITADO
[3049ms] â„¹ï¸  TIME_INFO: ğŸ• Iniciando configuraciÃ³n del sistema de tiempo
[3050ms] ğŸ” TIME_DEBUG: âš¡ EnergÃ­a activada para RTC
[5059ms] ğŸ” TIME_DEBUG: ğŸ”„ RTC - Intento de inicializaciÃ³n 1 de 3
[5060ms] â„¹ï¸  TIME_INFO: âœ… RTC inicializado exitosamente en intento 1
[5171ms] ğŸ” TIME_DEBUG: ğŸ”‹ RTC - BaterÃ­a en buen estado
[5171ms] ğŸ” TIME_DEBUG: ğŸ”„ RTC - Intento de lectura 1 de 3
[5172ms] â„¹ï¸  TIME_INFO: âœ… Tiempo leÃ­do exitosamente en intento 1
[5182ms] â„¹ï¸  TIME_INFO: ğŸ“… Fecha y hora configuradas:
[5183ms] â„¹ï¸  TIME_INFO:    2025/11/24 19:25:47
[5193ms] â„¹ï¸  TIME_INFO: ğŸ“Š Estado del RTC:
[5193ms] â„¹ï¸  TIME_INFO:    Inicializado: âœ… SI
[5203ms] â„¹ï¸  TIME_INFO:    BaterÃ­a: âœ… OK
[5203ms] â„¹ï¸  TIME_INFO:    Errores de init: 0
[5214ms] â„¹ï¸  TIME_INFO:    Errores de lectura: 0
[5214ms] â„¹ï¸  TIME_INFO: âœ… Sistema de tiempo configurado exitosamente
âœ… Sistema de tiempo configurado
ğŸ›°ï¸  Configurando GPS del mÃ³dem SIM...
[5224ms] â„¹ï¸  INFO: ğŸ›°ï¸  Configurando GPS integrado del mÃ³dem
[5235ms] â„¹ï¸  INFO: ğŸ›°ï¸  Iniciando mÃ³dulo GPS integrado
[5345ms] â„¹ï¸  INFO: âœ… MÃ³dem iniciado correctamente
[9740ms] â„¹ï¸  INFO: âœ… GPS habilitado correctamente
[9741ms] â„¹ï¸  INFO: ğŸ›°ï¸  Obteniendo coordenadas GPS del mÃ³dem SIM...
[20994ms] â„¹ï¸  INFO: âœ… Coordenadas GPS obtenidas en 1 intentos
[20995ms] â„¹ï¸  INFO: âœ… Coordenadas GPS obtenidas y almacenadas
[21005ms] â„¹ï¸  INFO: ğŸ›°ï¸  Deteniendo mÃ³dulo GPS integrado
[26216ms] â„¹ï¸  INFO: âœ… GPS deshabilitado correctamente
[26217ms] â„¹ï¸  INFO: ğŸ”‹ GPS detenido para ahorrar energÃ­a
[26217ms] â„¹ï¸  INFO: ğŸ”Œ Apagando mÃ³dem para mÃ¡ximo ahorro de energÃ­a
[31227ms] â„¹ï¸  INFO: âœ… Funciones del mÃ³dem desactivadas
[36427ms] â„¹ï¸  INFO: ğŸ”‹ MÃ³dem apagado completamente - mÃ¡ximo ahorro de energÃ­a
âœ… GPS del mÃ³dem SIM configurado
ğŸŒ± Iniciando lectura de sensores...
----REQUEST 485 Sonda Seed
12,04,00,00,00,03,B2,A8, 
----RESPONSE 485 Sonda Seed
12,04,06,08,EF,00,00,00,00,6D,3C,00, 
âœ… Sonda Seed - ComunicaciÃ³n exitosa (11 bytes)
âš ï¸ ADVERTENCIA: Sonda Seed - Temperatura sospechosa
âœ… Sonda Seed - Datos procesados correctamente
âœ… AHT20 - Lectura exitosa
Sensor AHT20
2794
5235
-----------
âœ… BaterÃ­a - Lectura exitosa
---------Bateria----------
394
-------------------
=== RESUMEN DE ESTADO ===
Sonda: âœ… OK
AHT: âœ… OK
BaterÃ­a: âœ… OK
========================
ğŸ“Š DATOS DE SENSORES LEÃDOS:
=============================
ğŸŒ± DATOS DE SUELO:
   Temperatura: 22.9Â°C
   Humedad: 0.0%
   Conductividad: 0 Î¼S/cm
   pH: 0.00
ğŸŒ¡ï¸  DATOS AMBIENTALES:
   Temperatura: 27.9Â°C
   Humedad: 52.3%
ğŸ”‹ DATOS DEL SISTEMA:
   Voltaje baterÃ­a: 3.64V
   Calidad seÃ±al: 0 dBm
ğŸ›°ï¸  DATOS GPS:
   Latitud: 19.885099Â°
   Longitud: -103.600372Â°
   Altitud: 1382.8m
=============================
âœ… Lectura de sensores completada
ğŸ“¡ Iniciando configuraciÃ³n del mÃ³dem LTE/GSM...
[38862ms] â„¹ï¸  INFO: ğŸš€ Iniciando configuraciÃ³n del mÃ³dem LTE/GSM
[38873ms] â„¹ï¸  INFO: ğŸ“± Iniciando comunicaciÃ³n GSM
[40133ms] ğŸ” DEBUG: ğŸ”„ Esperando respuesta del mÃ³dem...
[41373ms] ğŸ” DEBUG: ğŸ”„ Esperando respuesta del mÃ³dem...
[42613ms] ğŸ” DEBUG: ğŸ”„ Esperando respuesta del mÃ³dem...
[43853ms] ğŸ” DEBUG: ğŸ”„ Esperando respuesta del mÃ³dem...
[45093ms] ğŸ” DEBUG: ğŸ”„ Esperando respuesta del mÃ³dem...
[45093ms] ğŸ” DEBUG: ğŸ”Œ Pulsando pin PWRKEY del mÃ³dem
[49293ms] ğŸ” DEBUG: âœ… Pulsado PWRKEY completado
[49293ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CPIN?
[49294ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 15000ms
[64304ms] âš ï¸  WARN: âš ï¸  Comando AT fallÃ³: +CPIN? (esperaba: READY)
[64304ms] â„¹ï¸  INFO: ğŸ”„ Reintentando inicio del mÃ³dem
[64735ms] â„¹ï¸  INFO: âœ… ComunicaciÃ³n GSM establecida
[64735ms] â„¹ï¸  INFO: ğŸ“¡ Encendiendo RF del mÃ³dem
[64736ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CFUN=1
[64746ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 10000ms
AT+CFUN=1
OK
[74746ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CFUN=1
[74746ms] â„¹ï¸  INFO: âœ… RF del mÃ³dem activada correctamente
[76746ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CFUN?
[76746ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 5000ms
AT+CFUN?
+CFUN: 1

OK
[81747ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CFUN?
[81747ms] â„¹ï¸  INFO: âœ… RF verificada - mÃ³dem completamente funcional
[81748ms] â„¹ï¸  INFO: ğŸ“± Obteniendo informaciÃ³n de la tarjeta SIM
[89067ms] â„¹ï¸  INFO: ğŸ“± ICCID: 89883030000096466369
[89067ms] â„¹ï¸  INFO: ğŸ“¶ Calidad de seÃ±al: 13
[89068ms] âš ï¸  WARN: âš ï¸  SeÃ±al regular
[89078ms] â„¹ï¸  INFO: ğŸ’¾ Iniciando sistema de archivos LittleFS
[89078ms] ğŸ” DEBUG: ğŸ”„ Intentando montar LittleFS (intento 1 de 5)
[89093ms] â„¹ï¸  INFO: âœ… LittleFS montado correctamente
[89113ms] â„¹ï¸  INFO: ğŸ’¾ Espacio total: 1441792 bytes
[89113ms] â„¹ï¸  INFO: ğŸ’¾ Espacio usado: 16384 bytes
[89113ms] â„¹ï¸  INFO: ğŸ’¾ Espacio libre: 1425408 bytes
[89123ms] â„¹ï¸  INFO: ğŸ“¦ Preparando datos para envÃ­o
ğŸ“± ICCID: 89883030000096466369
ğŸ“¶ Calidad de seÃ±al: 13
[89133ms] ğŸ” DEBUG: ğŸ”„ Convirtiendo ICCID a formato hexadecimal
------ICCID hex------
0x38 0x39 0x38 0x38 0x33 0x30 0x33 0x30 0x30 0x30 0x30 0x30 0x39 0x36 0x34 0x36 0x36 0x33 0x36 0x39 
„ Preparando datos de sensores
[89155ms] ğŸ” DEBUG: ğŸ”„ Preparando datos de sensores
sizeof(sensordata_type) = 43
STRUCT_SIZE usado = 46
âš ï¸  ADVERTENCIA: sizeof discrepancia - usando 46 bytes fijos
------Sensor data hex------
0x08 0xEF 0x00 0x00 0x00 0x00 0x00 0x00 0x14 0x73 0x0A 0xEA 0x01 0x8A 0x07 0xE9 0x0B 0x18 0x13 0x19 0x2F 0x0D 0xAF 0x14 0x9F 0x41 0x64 0x33 0xCF 0xC2 0x89 0xD9 0xAC 0x44 0x05 0x01 0x00 0x01 0x00 0x97 0x04 0x01 0x01 0x00 0x00 0x00 
TamaÃ±o estructura: 46
[89188ms] ğŸ” DEBUG: ğŸ”„ Construyendo cadena de envÃ­o
------Cadena envÃ­o hex------
0x38 0x39 0x38 0x38 0x33 0x30 0x33 0x30 0x30 0x30 0x30 0x30 0x39 0x36 0x34 0x36 0x36 0x33 0x36 0x39 0x08 0xEF 0x00 0x00 0x00 0x00 0x00 0x00 0x14 0x73 0x0A 0xEA 0x01 0x8A 0x07 0xE9 0x0B 0x18 0x13 0x19 0x2F 0x0D 0xAF 0x14 0x9F 0x41 0x64 0x33 0xCF 0xC2 0x89 0xD9 0xAC 0x44 0x05 0x01 0x00 0x01 0x00 0x97 0x04 0x01 0x01 0x00 0x00 0x00 0xF6 0x0E 
: 
[89232ms] â„¹ï¸  INFO: ğŸ” Encriptando datos con AES
ğŸ” [CRYPTO] [encryptChar] [INFO] 89232ms: Iniciando encriptaciÃ³n de array de caracteres
ğŸ” [CRYPTO] [encryptChar] [INFO] 89243ms: EncriptaciÃ³n exitosa en 11ms
[89253ms] â„¹ï¸  INFO: âœ… Datos preparados: 108 bytes encriptados
[89253ms] â„¹ï¸  INFO: ğŸ“¦ Datos preparados y encriptados: 108 bytes
[89263ms] â„¹ï¸  INFO: ğŸ’¾ Guardando dato en buffer local
[89357ms] â„¹ï¸  INFO: âœ… Dato guardado en buffer. Total en buffer: 3 lÃ­neas
[89357ms] â„¹ï¸  INFO: ğŸŒ Iniciando conexiÃ³n LTE
[89367ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CNMP=38
[89367ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CNMP=38
OK
[95377ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CNMP=38
[95378ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CMNB=1
[95378ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CMNB=1
OK
[101388ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CMNB=1
[101388ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CBANDCFG="CAT-M",1,2,3,4,5,8,12,13,14,18,19,20,25,26,27,28,66,85
[101399ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CBANDCFG="CAT-M",1,2,3,4,5,8,12,13,14,18,19,20,25,26,27,28,66,85
OK
[107399ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CBANDCFG="CAT-M",1,2,3,4,5,8,12,13,14,18,19,20,25,26,27,28,66,85
[107400ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CBANDCFG="NB-IOT",2,3,5,8,20,28
[107410ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CBANDCFG="NB-IOT",2,3,5,8,20,28
OK
[113420ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CBANDCFG="NB-IOT",2,3,5,8,20,28
[113420ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CBANDCFG?
[113431ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CBANDCFG?
+CBANDCFG: "CAT-M",1,2,3,4,5,8,12,13,14,18,19,20,25,26,27,28,66,85
+CBANDCFG: "NB-IOT",2,3,5,8,20,28

OK
[119431ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CBANDCFG?
[122431ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CGDCONT=1,"IP","em"
[122431ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CGDCONT=1,"IP","em"
OK
[128442ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CGDCONT=1,"IP","em"
[128442ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CNACT=0,1
[128443ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 5000ms
AT+CNACT=0,1
OK

+APP PDP: 0,ACTIVE
[133453ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CNACT=0,1
[133724ms] ğŸ” DEBUG: ğŸ“¶ Calidad de seÃ±al: 15
[133725ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CNACT?
[133725ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CNACT?
+CNACT: 0,1,"100.116.56.23"
+CNACT: 1,0,"0.0.0.0"
+CNACT: 2,0,"0.0.0.0"
+CNACT: 3,0,"0.0.0.0"

OK
[139735ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CNACT?
[140036ms] â„¹ï¸  INFO: âœ… Conectado a la red LTE
[140036ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CPSI?
[140037ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CPSI?
+CPSI: LTE CAT-M1,Online,334-050,0x139D,36032543,424,EUTRAN-BAND4,2225,4,4,-13,-113,-87,14

OK
[146047ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CPSI?
[146048ms] â„¹ï¸  INFO: âœ… ConexiÃ³n LTE establecida, enviando datos
[146048ms] â„¹ï¸  INFO: ğŸ“¤ Iniciando envÃ­o de datos del buffer
[146060ms] â„¹ï¸  INFO: ğŸ”Œ Abriendo conexiÃ³n TCP con validaciÃ³n de estado
[146070ms] ğŸ” DEBUG: ğŸ” Verificando estado del socket TCP
[149081ms] âš ï¸  WARN: âš ï¸  Respuesta incompleta al consultar +CASTATE?, asumiendo socket inactivo
[149081ms] ğŸ” DEBUG: ğŸ” Socket TCP detectado como inactivo
[149092ms] â„¹ï¸  INFO: ğŸ”Œ Abriendo conexiÃ³n TCP a d01.elathia.ai:11235
[149092ms] ğŸ” DEBUG: ğŸ”„ Intento 1 de 5
[149102ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CAOPEN=0,0,"TCP","d01.elathia.ai",11235
[149113ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
AT+CAOPEN=0,0,"TCP","d01.elathia.ai",11235
+CAOPEN: 0,0

OK
[155113ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CAOPEN=0,0,"TCP","d01.elathia.ai",11235
[155113ms] â„¹ï¸  INFO: âœ… Socket TCP abierto exitosamente
[155133ms] ğŸ” DEBUG: ğŸ“¤ Enviando 88 bytes por TCP
[155174ms] ğŸ” DEBUG: âœ… Datos TCP enviados exitosamente
[155174ms] â„¹ï¸  INFO: âœ… Enviado: kwXLrmEe5sTdYrBMqL+nvUWkzmboNSH72hnkgSw8vlJBikGK2x...
[155186ms] ğŸ” DEBUG: ğŸ“¤ Enviando 88 bytes por TCP
[155186ms] ğŸ” DEBUG: ğŸ§¹ Limpiados 11 bytes del buffer serial
[155228ms] ğŸ” DEBUG: âœ… Datos TCP enviados exitosamente
[155228ms] â„¹ï¸  INFO: âœ… Enviado: kwXLrmEe5sTdYrBMqL+nvTEkpLpO6RyrjqSyHgS628BRUUmXSp...
[155239ms] ğŸ” DEBUG: ğŸ“¤ Enviando 108 bytes por TCP
[155239ms] ğŸ” DEBUG: ğŸ§¹ Limpiados 11 bytes del buffer serial
[155293ms] ğŸ” DEBUG: âœ… Datos TCP enviados exitosamente
[155293ms] â„¹ï¸  INFO: âœ… Enviado: kwXLrmEe5sTdYrBMqL+nvZeosOlG80ncXJzYj0PClX8oILIvWg...
[155306ms] ğŸ” DEBUG: ğŸ”Œ Cerrando conexiÃ³n TCP
[155307ms] ğŸ” DEBUG: ğŸ“¤ Enviando comando AT: +CACLOSE=0
[155307ms] ğŸ” DEBUG: â±ï¸  Usando timeout especificado: 6000ms
[155317ms] ğŸ” DEBUG: ğŸ§¹ Limpiados 11 bytes del buffer serial
AT+CACLOSE=0
OK
[161317ms] ğŸ” DEBUG: âœ… Comando AT exitoso: +CACLOSE=0
[161317ms] ğŸ” DEBUG: âœ… ConexiÃ³n TCP cerrada
[161334ms] â„¹ï¸  INFO: ğŸ“Š Resumen de envÃ­o: 3 enviados, 0 fallidos
[161334ms] â„¹ï¸  INFO: ğŸ§¹ Limpiando buffer de datos enviados
[161362ms] â„¹ï¸  INFO: âœ… Buffer limpio. Datos pendientes: 0 lÃ­neas
[161362ms] ğŸ” DEBUG: ğŸ”Œ Pulsando pin PWRKEY del mÃ³dem
[165572ms] ğŸ” DEBUG: âœ… Pulsado PWRKEY completado
[165572ms] â„¹ï¸  INFO: ğŸ ConfiguraciÃ³n del mÃ³dem completada
âœ… ConfiguraciÃ³n del mÃ³dem completada
ğŸ’¤ Preparando sistema para modo deep sleep...
â±ï¸  ESTADÃSTICAS DE TIEMPO DE FUNCIONAMIENTO:
=============================================
   Tiempo total: 165567 ms
   DuraciÃ³n: 2 minutos y 45 segundos
   CronÃ³metro estado: DETENIDO
ğŸ“Š ESTADÃSTICAS FINALES DEL SISTEMA:
=== ESTADÃSTICAS DEL SISTEMA ===
MÃ³dem inicializado: SÃ­
GPS habilitado: No
Calidad de seÃ±al: 13
Fallos consecutivos: 0
Ãšltimo intento de conexiÃ³n: 0ms
Timeout adaptativo actual: 6000ms

âœ… Sistema preparado para deep sleep
ğŸŒ™ Entrando en modo deep sleep...
â° PrÃ³ximo despertar en 600 segundos
Setup ESP32 to sleep for every 600 seconds
Going to sleep now
